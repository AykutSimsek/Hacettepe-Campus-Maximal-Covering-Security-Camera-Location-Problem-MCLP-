HOW TO RUN THE CODE AND DATA EXAMPLES
====================================

This document explains how to run main.py and describes each processing stage
in the exact order implemented in the code.

1. REQUIREMENTS
---------------
Software:
- Python 3.9 or higher
- Gurobi Optimizer (Requires a valid license or academic license)

Required Python libraries:
- numpy
- pandas
- matplotlib
- scipy
- pillow (PIL)
- openpyxl
- gurobipy (Gurobi interface)

Install required libraries using:
pip install numpy pandas matplotlib scipy pillow openpyxl gurobipy


2. PROJECT DIRECTORY STRUCTURE
------------------------------
Ensure that all files are located in the same directory as main.py.

your_project_folder/
|
├── main.py
├── Final_Dataset_MCLP.xlsx
├── kroki.jpg
├── how_to_run.txt
|
└── (Generated automatically after execution)
    ├── grid_kroki.png
    ├── demand_points.xlsx
    ├── camera_points.xlsx
    ├── grid_locations_with_strips.png
    ├── campus_heatmap.png
    ├── grid_heatmap.png
    |
    ├── [GREEDY OPTIMIZATION OUTPUTS - 3 RUNS]
    ├── greedy_solution_final_soln1.xlsx
    ├── greedy_heatmap_soln1.png
    ├── greedy_growth_curve_soln1.png
    ├── greedy_heatmap_gridview_soln1.png
    ├── greedy_solution_final_soln2.xlsx
    ├── greedy_heatmap_soln2.png
    ├── greedy_growth_curve_soln2.png
    ├── greedy_heatmap_gridview_soln2.png
    ├── greedy_solution_final_soln3.xlsx
    ├── greedy_heatmap_soln3.png
    ├── greedy_growth_curve_soln3.png
    ├── greedy_heatmap_gridview_soln3.png
    |
    ├── [LOCAL SEARCH IMPROVEMENT OUTPUTS]
    ├── local_search_soln1.xlsx
    ├── local_search_heatmap_soln1.png
    ├── local_search_plot_soln1.png
    ├── local_search_soln2.xlsx
    ├── local_search_heatmap_soln2.png
    ├── local_search_plot_soln2.png
    ├── local_search_soln3.xlsx
    ├── local_search_heatmap_soln3.png
    ├── local_search_plot_soln3.png
    |
    ├── [PSO REFINEMENT OUTPUTS]
    ├── pso_solution_soln1.xlsx
    ├── pso_heatmap_soln1.png
    ├── pso_trajectory_plot_soln1.png
    ├── pso_solution_soln2.xlsx
    ├── pso_heatmap_soln2.png
    ├── pso_trajectory_plot_soln2.png
    ├── pso_solution_soln3.xlsx
    ├── pso_heatmap_soln3.png
    ├── pso_trajectory_plot_soln3.png
    |
    └── [GUROBI EXACT OPTIMIZATION OUTPUTS]
        ├── gurobi_optimal_solution.xlsx  <-- (New: Global Optimal Benchmark)
        └── gurobi_optimal_heatmap.png


3. INPUT DATA FILES
------------------

3.1 Final_Dataset_MCLP.xlsx
Main input Excel file with two sheets:

Sheet: demand
- x      : grid column index
- y      : grid row index
- weight : demand weight

Sheet: camera
- x : grid column index
- y : grid row index

3.2 kroki.jpg
Background image of the Hacettepe University campus used for visualization.


4. RUNNING THE CODE
------------------
Open a terminal in the project directory and run:

python main.py

The script runs all steps sequentially.
Execution may take significant time as it performs heuristics followed by an exact Gurobi optimization.


5. EXECUTION FLOW AND OUTPUTS
----------------------------

--- PRE-PROCESSING & VISUALIZATION ---

STEP 1 – Grid Overlay Generation
Creates an 80x130 grid over the campus image.
Output: grid_kroki.png

STEP 2 – Demand Point Coordinate Conversion
Converts grid-based demand points into metric coordinates.
Output: demand_points.xlsx

STEP 3 – Camera Candidate Generation
Generates camera candidate locations (4 orientations per location).
Output: camera_points.xlsx

STEP 4 – Grid-Based Visualization
Displays demand points and camera locations with coordinate strips.
Output: grid_locations_with_strips.png

STEP 5 & 6 – Demand Heatmaps
Visualizes demand intensity on the campus image and strictly on the grid.
Outputs: 
- campus_heatmap.png
- grid_heatmap.png

STEP 7 – Coverage Matrix Construction
(Internal step) Computes coverage between camera-orientation pairs and demand points.

--- PHASE 1: RANDOMIZED GREEDY OPTIMIZATION ---

STEP 8 – Randomized Greedy (3 Independent Runs)
Runs the Greedy algorithm 3 separate times using RCL (Restricted Candidate List).
Outputs (for Soln 1, 2, and 3):
- greedy_solution_final_soln{X}.xlsx
- greedy_heatmap_soln{X}.png
- greedy_growth_curve_soln{X}.png

STEP 9 – Grid View Visualization for Greedy Solutions
Reloads the top 100 cameras from the 3 generated solutions and creates precise grid-based heatmaps.
Outputs:
- greedy_heatmap_gridview_soln{X}.png

--- PHASE 2: LOCAL SEARCH (IMPROVEMENT) ---

STEP 10 – Local Search Optimization (1-Swap on Top 100)
Takes the **top 100 cameras** from Phase 1. Performs a **1-Swap Local Search** to improve coverage.
Outputs (for Soln 1, 2, and 3):
- local_search_soln{X}.xlsx
- local_search_heatmap_soln{X}.png
- local_search_plot_soln{X}.png

--- PHASE 3: PARTICLE SWARM OPTIMIZATION (REFINEMENT) ---

STEP 11 – PSO with Ruin & Recreate
Uses Phase 2 solutions to seed a Particle Swarm Optimizer with a "Ruin & Recreate" mutation strategy to escape local optima.
Outputs (for Soln 1, 2, and 3):
- pso_solution_soln{X}.xlsx
- pso_heatmap_soln{X}.png
- pso_trajectory_plot_soln{X}.png

--- PHASE 4: EXACT OPTIMIZATION (BENCHMARK) ---

STEP 12 – Global Optimal Solution (Gurobi)
Solves the exact Mixed Integer Linear Programming (MILP) formulation of the MCLP problem.
- Uses a budget of 100 cameras.
- Provides the mathematically optimal upper bound to compare against the heuristic results (Greedy/PSO).
Outputs:
- gurobi_optimal_solution.xlsx
- gurobi_optimal_heatmap.png


6. NOTES
--------
- **Pipeline Strategy**: 
  1. **Greedy**: Exploration.
  2. **Local Search**: Exploitation.
  3. **PSO**: Refinement.
  4. **Gurobi**: Validation (Gold Standard).
- **Run Time**: The heuristic phases (1-3) are computationally intensive. The Gurobi phase (4) depends on the solver's gap setting (set to 0.1%) and the complexity of the dataset.
- **Dependencies**: Ensure Gurobi is installed and licensed. If Gurobi is not available, Phase 4 will fail, but previous steps will remain valid.