HOW TO RUN THE CODE AND DATA EXAMPLES
====================================

This document explains how to run main.py and describes each processing stage
in the exact order implemented in the code.

1. REQUIREMENTS
---------------
Software:
- Python 3.9 or higher

Required Python libraries:
- numpy
- pandas
- matplotlib
- scipy
- pillow (PIL)
- openpyxl

Install required libraries using:
pip install numpy pandas matplotlib scipy pillow openpyxl


2. PROJECT DIRECTORY STRUCTURE
------------------------------
Ensure that all files are located in the same directory as main.py.

your_project_folder/
|
├── main.py
├── Final_Dataset_MCLP.xlsx
├── kroki.jpg
├── how_to_run.txt
|
└── (Generated automatically after execution)
    ├── grid_kroki.png
    ├── demand_points.xlsx
    ├── camera_points.xlsx
    ├── grid_locations_with_strips.png
    ├── campus_heatmap.png
    ├── grid_heatmap.png
    |
    ├── [GREEDY OPTIMIZATION OUTPUTS - 3 RUNS]
    ├── greedy_solution_final_soln1.xlsx
    ├── greedy_heatmap_soln1.png
    ├── greedy_growth_curve_soln1.png    <-- (New: Growth Curve)
    ├── greedy_heatmap_gridview_soln1.png
    ├── greedy_solution_final_soln2.xlsx
    ├── greedy_heatmap_soln2.png
    ├── greedy_growth_curve_soln2.png    <-- (New: Growth Curve)
    ├── greedy_heatmap_gridview_soln2.png
    ├── greedy_solution_final_soln3.xlsx
    ├── greedy_heatmap_soln3.png
    ├── greedy_growth_curve_soln3.png    <-- (New: Growth Curve)
    ├── greedy_heatmap_gridview_soln3.png
    |
    ├── [LOCAL SEARCH IMPROVEMENT OUTPUTS]
    ├── local_search_soln1.xlsx
    ├── local_search_heatmap_soln1.png
    ├── local_search_plot_soln1.png      <-- (New: Optimization Trajectory)
    ├── local_search_soln2.xlsx
    ├── local_search_heatmap_soln2.png
    ├── local_search_plot_soln2.png
    ├── local_search_soln3.xlsx
    ├── local_search_heatmap_soln3.png
    ├── local_search_plot_soln3.png
    |
    └── [PSO REFINEMENT OUTPUTS]
    ├── pso_solution_soln1.xlsx
    ├── pso_heatmap_soln1.png
    ├── pso_trajectory_plot_soln1.png    <-- (New: Convergence Plot)
    ├── pso_solution_soln2.xlsx
    ├── pso_heatmap_soln2.png
    ├── pso_trajectory_plot_soln2.png
    ├── pso_solution_soln3.xlsx
    ├── pso_heatmap_soln3.png
    └── pso_trajectory_plot_soln3.png


3. INPUT DATA FILES
------------------

3.1 Final_Dataset_MCLP.xlsx
Main input Excel file with two sheets:

Sheet: demand
- x      : grid column index
- y      : grid row index
- weight : demand weight

Sheet: camera
- x : grid column index
- y : grid row index

3.2 kroki.jpg
Background image of the Hacettepe University campus used for visualization.


4. RUNNING THE CODE
------------------
Open a terminal in the project directory and run:

python main.py

The script runs all steps sequentially.
Execution may take several minutes depending on the hardware, as it now performs three distinct phases of optimization (Greedy -> Local Search -> PSO) for three separate solutions.


5. EXECUTION FLOW AND OUTPUTS
----------------------------

--- PRE-PROCESSING & VISUALIZATION ---

STEP 1 – Grid Overlay Generation
Creates an 80x130 grid over the campus image.
Output: grid_kroki.png

STEP 2 – Demand Point Coordinate Conversion
Converts grid-based demand points into metric coordinates.
Output: demand_points.xlsx

STEP 3 – Camera Candidate Generation
Generates camera candidate locations (4 orientations per location).
Output: camera_points.xlsx

STEP 4 – Grid-Based Visualization
Displays demand points and camera locations with coordinate strips.
Output: grid_locations_with_strips.png

STEP 5 & 6 – Demand Heatmaps
Visualizes demand intensity on the campus image and strictly on the grid.
Outputs: 
- campus_heatmap.png
- grid_heatmap.png

STEP 7 – Coverage Matrix Construction
(Internal step) Computes coverage between camera-orientation pairs and demand points for use in optimization.

--- PHASE 1: RANDOMIZED GREEDY OPTIMIZATION ---

STEP 8 – Randomized Greedy (3 Independent Runs)
Runs the Greedy algorithm 3 separate times using RCL (Restricted Candidate List) to generate distinct initial solutions.
It generates a full solution but highlights the performance at **100 cameras**.
Outputs (for Soln 1, 2, and 3):
- greedy_solution_final_soln{X}.xlsx
- greedy_heatmap_soln{X}.png
- greedy_growth_curve_soln{X}.png (Visualizes coverage growth vs number of cameras)

STEP 9 – Grid View Visualization for Greedy Solutions
Reloads the top 100 cameras from the 3 generated solutions and creates precise grid-based heatmaps.
Outputs:
- greedy_heatmap_gridview_soln{X}.png

--- PHASE 2: LOCAL SEARCH (IMPROVEMENT) ---

STEP 10 – Local Search Optimization (1-Swap on Top 100)
Takes the **top 100 cameras** from the 3 greedy solutions in Step 8.
Performs a **1-Swap Local Search**: Iteratively replaces a selected camera with an unselected one if it improves total coverage.
Outputs (for Soln 1, 2, and 3):
- local_search_soln{X}.xlsx
- local_search_heatmap_soln{X}.png
- local_search_plot_soln{X}.png (Trajectory plot showing improvement over iterations)

--- PHASE 3: PARTICLE SWARM OPTIMIZATION (REFINEMENT) ---

STEP 11 – PSO with Ruin & Recreate
Takes the 3 Local Search solutions from Step 10 and uses them to "seed" the Particle Swarm.
Uses a **Ruin & Recreate** strategy:
- Particle 0 is initialized with the exact Local Search solution.
- Other particles are initialized with variations.
- During execution, the algorithm randomly "ruins" (removes) a percentage of cameras and "recreates" (adds) new ones to escape local optima.
Outputs (for Soln 1, 2, and 3):
- pso_solution_soln{X}.xlsx (Final optimized list of 100 cameras)
- pso_heatmap_soln{X}.png (Final visualization)
- pso_trajectory_plot_soln{X}.png (Convergence plot showing global best score)


6. NOTES
--------
- **Pipeline Strategy**: The code uses a "Warm Start" strategy with a fixed budget of **100 cameras**.
  1. **Greedy**: Rapidly identifies good candidate regions.
  2. **Local Search**: Refines the specific selection of 100 cameras by swapping.
  3. **PSO**: Uses swarm intelligence and mutation (Ruin & Recreate) to squeeze out final percentage gains.
- **Run Time**: The "Local Search" and "PSO" phases are computationally intensive.
- **File Dependency**: Do not rename intermediate files (e.g., local_search_soln1.xlsx) while the script is running, as Phase 3 depends on the output of Phase 2.